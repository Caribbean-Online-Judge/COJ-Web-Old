contest.awards.not.issued=select exists(select * from contest_awards_users where uid is null and cid=?)
delete.contest.awards=delete from contest_awards_users where cid=?
load.contest.awards.id=select aid from contest_awards_users where cid=?
insert.contest.award=insert into contest_awards_users (aid,cid) values(?,?)
set.contest.award=update contest_awards_users set uid=? where cid=? and aid=?
load.issued.contest.awards=select cau.*, ca.*,u.nick,u.username from contest_awards_users cau join users u using (uid) join contest_awards ca using (aid) where cau.cid=?
problem.created.not.processed=select pid as pid from problem where event_created_processed=false and enable=true and disable_24h = false order by pid desc limit 1
contest.created.not.processed=select cid from contest where event_created_processed=false and enabled=true
contest.started.not.processed=select cid from contest where now() > initdate and event_started_processed=false and enabled=true
contest.ended.not.processed=select cid from contest where now() > enddate and event_ended_processed=false and enabled=true
mark.contest.created=update contest set event_created_processed=true where cid=?
mark.contest.started=update contest set event_started_processed=true where cid=?
mark.contest.ended=update contest set event_ended_processed=true where cid=?
exclusive.award=select username,case when a_time=100000000 then 0 else a_time end as a,case when b_time=100000000 then 0 else b_time end as b,case when c_time=100000000 then 0 else c_time end as c,case when d_time=100000000 then 0 else d_time end as d,case when e_time=100000000 then 0 else e_time end as e,case when f_time=100000000 then 0 else f_time end as f,case when g_time=100000000 then 0 else g_time end as g,case when h_time=100000000 then 0 else h_time end as h,case when i_time=100000000 then 0 else i_time end as i,case when j_time=100000000 then 0 else j_time end as j,case when k_time=100000000 then 0 else k_time end as k,case when l_time=100000000 then 0 else l_time end as l from users join user_contest uc using (uid) join contest on contest.cid = uc.cid where uc.cid=? and (contest.guest_group is null or groupd <> contest.guest_group) and virtual=false order by accepted desc,uc.penalty asc
fast.award=select username from ((select 'a' as p, uid,least(a_time) as m from user_contest uc join contest c using (cid) where a_time=least(a_time) and uc.cid=? and (c.guest_group is null or groupd <> c.guest_group)  and virtual=false order by m limit 1) union (select 'b' as p, uid,least(b_time) as m from user_contest uc join contest c using (cid) where b_time=least(b_time) and uc.cid=? and (c.guest_group is null or groupd <> c.guest_group)  and virtual=false order by m limit 1) union (select 'c' as p, uid,least(c_time) as m from user_contest uc join contest c using (cid) where c_time=least(c_time) and uc.cid=? and (c.guest_group is null or groupd <> c.guest_group)  and virtual=false order by m limit 1) union (select 'd' as p, uid,least(d_time) as m from user_contest uc join contest c using (cid) where d_time=least(d_time) and uc.cid=? and (c.guest_group is null or groupd <> c.guest_group)  and virtual=false order by m limit 1) union (select 'e' as p, uid,least(e_time) as m from user_contest uc join contest c using (cid) where e_time=least(e_time) and uc.cid=? and (c.guest_group is null or groupd <> c.guest_group)  and virtual=false order by m limit 1) union (select 'f' as p, uid,least(f_time) as m from user_contest uc join contest c using (cid) where f_time=least(f_time) and uc.cid=? and (c.guest_group is null or groupd <> c.guest_group)  and virtual=false order by m limit 1) union (select 'g' as p, uid,least(g_time) as m from user_contest uc join contest c using (cid) where g_time=least(g_time) and uc.cid=? and (c.guest_group is null or groupd <> c.guest_group)  and virtual=false order by m limit 1) union (select 'h' as p, uid,least(h_time) as m from user_contest uc join contest c using (cid) where h_time=least(h_time) and uc.cid=? and (c.guest_group is null or groupd <> c.guest_group)  and virtual=false order by m limit 1) union (select 'i' as p, uid,least(i_time) as m from user_contest uc join contest c using (cid) where i_time=least(i_time) and uc.cid=? and (c.guest_group is null or groupd <> c.guest_group)  and virtual=false order by m limit 1) union (select 'j' as p, uid,least(j_time) as m from user_contest uc join contest c using (cid) where j_time=least(j_time) and uc.cid=? and (c.guest_group is null or groupd <> c.guest_group)  and virtual=false order by m limit 1) union (select 'k' as p, uid,least(k_time) as m from user_contest uc join contest c using (cid) where k_time=least(k_time) and uc.cid=? and (c.guest_group is null or groupd <> c.guest_group)  and virtual=false order by m limit 1) union (select 'l' as p, uid,least(l_time) as m from user_contest uc join contest c using (cid) where l_time=least(l_time) and uc.cid=? and (c.guest_group is null or groupd <> c.guest_group)  and virtual=false order by m limit 1)) as tbl join users using (uid) where m < 100000000 group by username order by count(username) desc limit 1
accurate.award=select username from (select uid,groupd,accepted,uc.penalty,case when a_time <> 100000000 and a_beforeac = 0 then a_time else 0 end as a,case when b_time <> 100000000 and b_beforeac = 0 then b_time else 0 end as b,case when c_time <> 100000000 and c_beforeac = 0 then c_time else 0 end as c,case when d_time <> 100000000 and d_beforeac = 0 then d_time else 0 end as d,case when e_time <> 100000000 and e_beforeac = 0 then e_time else 0 end as e,case when f_time <> 100000000 and f_beforeac = 0 then f_time else 0 end as f,case when g_time <> 100000000 and g_beforeac = 0 then g_time else 0 end as g,case when h_time <> 100000000 and h_beforeac = 0 then h_time else 0 end as h,case when i_time <> 100000000 and i_beforeac = 0 then i_time else 0 end as i,case when j_time <> 100000000 and j_beforeac = 0 then j_time else 0 end as j,case when k_time <> 100000000 and k_beforeac = 0 then k_time else 0 end as k,case when l_time <> 100000000 and l_beforeac = 0 then l_time else 0 end as l from user_contest uc join contest on contest.cid = uc.cid where uc.cid= ? and (contest.guest_group is null or groupd <> contest.guest_group) and virtual=false order by accepted desc,penalty asc) as tbl join users using (uid) order by (sign(a) +sign(b) +sign(c) +sign(d) +sign(e) +sign(f) +sign(g) +sign(h) +sign(i) +sign(j) +sign(k) +sign(l) ) desc,greatest(a,b,c,d,e,f,g,h,i,j,k,l) asc limit 1